# 🏥 Hospital Staff Management – Flask Backend

This project follows a clean monolithic architecture using Flask, SQLAlchemy, and Alembic. This document explains how to add new features (e.g., models, endpoints, services) the proper way.

> [!TIP]
> Document is generated by AI. Be advised!
---

## 🛠 Tech Stack

- Flask (app factory pattern)
- Flask-SQLAlchemy
- Flask-Migrate (Alembic)
- Service/Repository architecture
- RESTful API structure (JSON only)

---

## 🯩 Project Structure

```
/module
    /controllers         # API endpoint handlers (controllers)
    /services            # Business logic layer
    /repositories        # Data access logic (repositories)
    /models.py           # SQLAlchemy models
/shared                  # Shared in all modules
    /extensions.py       # Flask extensions like db
    /base_model.py       # Base class for instances
/app.py                  # App factory + entry point
```

---

## ✨ Adding a New Feature

Let’s say you want to add a new entity: `Patient`.

### 1. 🧱 Define Model in `models.py`

```python
class Patient(BaseModel):
    __tablename__ = 'patient'

    Id: Mapped[int] = mapped_column(db.Integer, primary_key=True)
    Name: Mapped[str] = mapped_column(db.String(100))
    Age: Mapped[int] = mapped_column(db.Integer)
    Gender: Mapped[str] = mapped_column(db.String(10))
```

---

### 2. 🏗 Run Alembic Migration

```bash
flask db migrate -m "Add patient table"
flask db upgrade
```

---

### 🧪 Testing Locally

```bash
flask run
# Test via Postman, curl, or Swagger if enabled
```

---

## ✅ Summary Checklist

- [ ] Add model in `<module-name>/models.py`
- [ ] Run `flask db migrate && flask db upgrade`
- [ ] Create repository
- [ ] Create service
- [ ] Create controller + route
- [ ] Register blueprint
- [ ] Test it!

---

## 🧼 Useful Commands

```bash
flask db migrate -m "Your message"
flask db upgrade
flask db downgrade
flask db current
```

---

## ❤️ Tips

- Keep routes in `controllers/`, logic in `services/`, and DB queries in `repositories/`
- Never edit the database manually. Always use Alembic migrations.
- Use `Mapped[...]` + `mapped_column()` for models to stay future-proof.

